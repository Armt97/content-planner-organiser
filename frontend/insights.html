<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Insights</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}?v=1">
</head>
<body>
 <!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark bg-opacity-75 py-3 position-relative">
  <div class="container-fluid justify-content-center">
    <ul class="navbar-nav">
      <li class="nav-item mx-3">
        <a class="nav-link text-white {% if request.path == '/idea-board' %}active{% endif %}" href="{{ url_for('idea_board') }}">Idea-Board</a>
      </li>
      <li class="nav-item mx-3">
        <a class="nav-link text-white {% if request.path == '/calendar' %}active{% endif %}" href="{{ url_for('calendar') }}">Calendar</a>
      </li>
      <li class="nav-item mx-3">
        <a class="nav-link text-white {% if request.path == '/library' %}active{% endif %}" href="{{ url_for('library') }}">Library</a>
      </li>
      <li class="nav-item mx-3">
        <a class="nav-link text-white {% if request.path == '/insights' %}active{% endif %}" href="{{ url_for('insights') }}">Insights</a>
      </li>
    </ul>
  </div>

  <!-- Logout pinned to navbar -->
  <form id="logoutForm" action="/logout" method="post"
        class="position-absolute top-50 end-0 translate-middle-y me-4">
    <button type="submit" class="btn btn-outline-light btn-sm px-3 py-1" id="logoutBtn">
      Logout
    </button>
  </form>
</nav>

<script>
  const lf = document.getElementById("logoutForm");
  lf?.addEventListener("submit", async (e) => {
    e.preventDefault();
    const res = await fetch("/logout", { method: "POST" });
    const data = await res.json().catch(()=>({}));
    if (data && data.ok) {
      window.location.href = data.redirect || "/";
    } else {
      alert("Logout failed. Try again.");
    }
  });
</script>

</body>
</html>